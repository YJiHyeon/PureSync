<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" dir="ltr">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>PureSync Admin</title>
   <th:block th:include="~{/fragments/styles :: styleFragment}"></th:block>
   <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body class="layout-light side-menu">
   <div th:replace="~{/fragments/header :: headerFragment}"></div>
   <main class="main-content">
      <div th:replace="~{/fragments/sidebar :: sidebarFragment}"></div>


      <div class="contents">

         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-12">

                  <div class="breadcrumb-main user-member justify-content-sm-between ">
                     <div class=" d-flex flex-wrap justify-content-center breadcrumb-main__wrapper">

                        <form action="/" class="d-flex align-items-center user-member__form my-sm-0 my-2">
                           <img src="/img/svg/search.svg" alt="search" class="svg">
                           <input class="form-control me-sm-2 border-0 box-shadow-none" type="search" placeholder="Search by Name" aria-label="Search">
                        </form>

                     </div>
                  </div>

               </div>
            </div>
            <div class="row">
               <div class="col-lg-12">
                  <div class="userDatatable global-shadow border-light-0 p-30 bg-white radius-xl w-100 mb-30">
                     <div class="table-responsive">
                        <table class="table mb-0 table-borderless">
                           <thead>
                              <tr class="userDatatable-header">
                                 <th>
                                    <span class="userDatatable-title">seq</span>
                                 </th>
                                 <th>
                                    <span class="userDatatable-title">id</span>
                                 </th>
                                 <th>
                                    <span class="userDatatable-title">title</span>
                                 </th>
                                 <th>
                                    <span class="userDatatable-title">write date</span>
                                 </th>
                                 <th>
                                    <span class="userDatatable-title">status</span>
                                 </th>
                              </tr>
                           </thead>
                           <tbody>

                              <tr th:each="board : ${userBoardList}" >
                                 <td th:text="${board.board_seq}">
                                    <div class="d-flex">

                                    </div>
                                 </td>

                                 <td th:text="${board.mem_id}" >
                                    <div class="userDatatable-content">

                                    </div>
                                 </td>
                                 <td th:text="${board.board_name}">
                                    <div class="userDatatable-content">

                                    </div>
                                 </td>
                                 <td th:text="${board.board_wdate}">
                                    <div class="userDatatable-content">

                                    </div>
                                 </td>
                                 <td th:text="${board.board_status_text}">
                                    <div class="userDatatable-content d-inline-block">
                                       <span class="bg-opacity-success  color-success rounded-pill userDatatable-content-status active"> </span>
                                    </div>
                                 </td>



                                 <td>
                                    <ul class="orderDatatable_actions mb-0 d-flex flex-wrap">
                                       <li>
                                          <a th:href="@{'/admin/user/view/' + ${board.board_seq}}" class="view">
                                             <i class="uil uil-eye"></i>
                                          </a>
                                       </li>

                                       <li>

                                          <a href="#none" class="remove" th:onclick="goDelete([[${board.board_seq}]]);">
                                             <i class="uil uil-trash-alt"></i>
                                          </a>
                                       </li>
                                    </ul>
                                 </td>

                              </tr>

                           </tbody>
                        </table>
                     </div>
                     <div class="d-flex justify-content-end pt-30">

                        <nav class="dm-page ">
                           <ul class="dm-pagination d-flex">
                              <li class="dm-pagination__item">
                                 <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-left"></span></a>
                                 <a href="#" class="dm-pagination__link"><span class="page-number">1</span></a>
                                 <a href="#" class="dm-pagination__link active"><span class="page-number">2</span></a>
                                 <a href="#" class="dm-pagination__link"><span class="page-number">3</span></a>
                                 <a href="#" class="dm-pagination__link pagination-control"><span class="page-number">...</span></a>
                                 <a href="#" class="dm-pagination__link"><span class="page-number">12</span></a>
                                 <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-right"></span></a>
                                 <a href="#" class="dm-pagination__option">
                                 </a>
                              </li>
                              <li class="dm-pagination__item">

                              </li>
                           </ul>
                        </nav>


                     </div>
                  </div>
               </div>
            </div>
         </div>

      </div>
      <div th:replace="~{/fragments/footer :: footerFragment}"></div>
   </main>
   <div id="overlayer">
      <div class="loader-overlay">
         <div class="dm-spin-dots spin-lg">
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
         </div>
      </div>
   </div>
   <div class="overlay-dark-sidebar"></div>
   <div class="customizer-overlay"></div>
   <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBgYKHZB_QKKLWfIRaYPCadza3nhTAbv7c"></script>
   <!-- inject:js-->
   <th:block th:include="~{/fragments/scripts :: scriptFragment}"></th:block>
</body>
</html>

<script>
   function goDelete(board_seq) {
   const confirmDelete = confirm("관리자의 권한으로 해당 게시물을 삭제하시겠습니까?");

      if (confirmDelete) {
         axios.get(`/admin/user/list/delete/${board_seq}`)
            .then((res) => {
               window.location.reload();
               return false;
            })
            .catch( (error) => {
               console.error('게시글 삭제 중 오류 발생:', error);
            });
      }
   }

</script>